<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-02-28 Mon 14:14 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>[[https://github.com/chenyanming/calibredb.el][calibredb.el]]</title>
<meta name="author" content="Damon Chen" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title"><a href="https://github.com/chenyanming/calibredb.el">calibredb.el</a></h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org8299606">1. Description</a>
<ul>
<li><a href="#org16ea72a">1.1. Related package</a></li>
</ul>
</li>
<li><a href="#orgaa9e02d">2. Installation</a>
<ul>
<li><a href="#org2dc87cf">2.1. Install sqlite and calibre</a>
<ul>
<li><a href="#org56fd9a7">2.1.1. macOS</a></li>
<li><a href="#orgd2242fe">2.1.2. Windows</a></li>
<li><a href="#org0f66b20">2.1.3. Linux</a></li>
</ul>
</li>
<li><a href="#orge4cce87">2.2. Install calibredb.el</a></li>
<li><a href="#orgf071641">2.3. Spacemacs Layer</a></li>
</ul>
</li>
<li><a href="#org3c2e1ee">3. Configuration</a>
<ul>
<li><a href="#orgec9e6ff">3.1. Quick Start</a>
<ul>
<li><a href="#org4625f73">3.1.1. require</a></li>
<li><a href="#org903a530">3.1.2. use-package</a></li>
</ul>
</li>
<li><a href="#orge518dd9">3.2. Virtual Libraries</a></li>
<li><a href="#org49dba82">3.3. Column width</a></li>
<li><a href="#org6aab194">3.4. Size indicator</a></li>
<li><a href="#orgfc5f0d5">3.5. File format icons</a></li>
<li><a href="#org83c0a2d">3.6. Configure to support org-ref</a></li>
<li><a href="#org98d9414">3.7. keybindings</a></li>
</ul>
</li>
<li><a href="#org5a2f76c">4. Workflows</a>
<ul>
<li><a href="#org006fecb">4.1. Start with <code>calibredb</code></a></li>
<li><a href="#org8448519">4.2. Start with <code>calibredb-find-helm</code> or <code>calibredb-find-counsel</code></a></li>
<li><a href="#org6a5fd97">4.3. Start with <code>calibredb-list</code></a></li>
</ul>
</li>
<li><a href="#org509bd10">5. Q&amp;A</a>
<ul>
<li><a href="#org17c469c">5.1. Transient commands</a></li>
<li><a href="#org5c86fca">5.2. What is my working library?</a></li>
<li><a href="#org4382cff">5.3. How to open an ebook?</a></li>
<li><a href="#org5149a27">5.4. How to add ebooks?</a></li>
<li><a href="#org25ec65f">5.5. How to remove ebooks?</a></li>
<li><a href="#org79afff1">5.6. How to switch virtual libraries?</a></li>
<li><a href="#orgfd64073">5.7. How to switch libraries?</a></li>
<li><a href="#orgb869bf7">5.8. How to set metadata on ebooks?</a>
<ul>
<li><a href="#orgfbaa56b">5.8.1. About <code>fetch-ebook-metadata</code></a></li>
</ul>
</li>
<li><a href="#orgb42db17">5.9. How to mark favorite/highlight/archive on ebooks?</a></li>
<li><a href="#org1b46327">5.10. How to do live filtering?</a></li>
<li><a href="#org4b2bfb2">5.11. How to do group filtering?</a></li>
<li><a href="#orgdfa3045">5.12. How to do quick group filtering?</a></li>
<li><a href="#orgc49d4bf">5.13. How to do sorting?</a></li>
<li><a href="#orga7ffa9f">5.14. How to interact with org-ref?</a></li>
<li><a href="#orge5d9998">5.15. Why the loading time is so long?</a></li>
<li><a href="#org8fa3961">5.16. Can not remember the keybindings?</a></li>
<li><a href="#org3955874">5.17. How to edit annotation with org-mode?</a></li>
<li><a href="#org2fa6825">5.18. How to search in ebooks directly?</a></li>
<li><a href="#orgb0577bf">5.19. How to interact with calibredb files in org files?</a></li>
<li><a href="#org26e7975">5.20. More examples?</a></li>
</ul>
</li>
<li><a href="#org75108ff">6. Supported Features</a>
<ul>
<li><a href="#orgdbc3127">6.1. calibredb</a></li>
<li><a href="#orge39793d">6.2. calibredb-search-live-filter</a></li>
<li><a href="#orgbb38ba1">6.3. calibredb-find-helm</a></li>
<li><a href="#orgfd951f3">6.4. calibredb-find-counsel</a></li>
<li><a href="#orgd9e050e">6.5. calibredb-list</a></li>
<li><a href="#orgf017d37">6.6. calibredb-clone</a></li>
<li><a href="#org5a0de61">6.7. calibredb-library-list</a></li>
<li><a href="#org7f6c15d">6.8. calibredb-switch-library</a></li>
<li><a href="#org8a15649">6.9. Show details</a></li>
<li><a href="#org70a0d41">6.10. Dispatch</a>
<ul>
<li><a href="#org40238b9">6.10.1. calibredb-dispatch</a></li>
<li><a href="#orgd4c3363">6.10.2. calibredb-set-metadata-dispatch</a></li>
<li><a href="#org4f92637">6.10.3. calibredb-catalog-bib-dispatch</a></li>
<li><a href="#org3e66844">6.10.4. calibredb-export-dispatch</a></li>
</ul>
</li>
<li><a href="#org64812bc">6.11. add</a></li>
<li><a href="#org51e592f">6.12. remove</a></li>
<li><a href="#orgc5b06a9">6.13. set<sub>metadata</sub></a></li>
<li><a href="#org63cf37b">6.14. Export</a></li>
<li><a href="#org45fc8e7">6.15. Yank</a></li>
<li><a href="#orgac8608a">6.16. Catalog</a>
<ul>
<li><a href="#orga9c09ef">6.16.1. BibTex</a></li>
</ul>
</li>
<li><a href="#org5ea0db5">6.17. calibredb-rga</a></li>
</ul>
</li>
<li><a href="#orgd4e90cc">7. Logs</a>
<ul>
<li><a href="#org663bc4d">7.1. <code>2022-02-28</code></a></li>
<li><a href="#org8d2812d">7.2. <code>2021-06-02</code></a></li>
<li><a href="#org5bf4449">7.3. <code>2021-03-21</code></a></li>
<li><a href="#org07fd530">7.4. <code>2020-12-25</code></a></li>
<li><a href="#orgc33ca81">7.5. <code>2020-10-12</code></a></li>
<li><a href="#org028613a">7.6. <code>2020-08-29</code></a></li>
<li><a href="#orge99cce4">7.7. <code>2020-08-09</code></a></li>
<li><a href="#org3e2283f">7.8. <code>2020-07-16</code></a></li>
<li><a href="#orgb1c1510">7.9. <code>2020-07-01</code></a></li>
<li><a href="#orgbdc7fa4">7.10. <code>2020-06-22</code></a></li>
<li><a href="#org2edac45">7.11. <code>2020-06-21</code></a></li>
<li><a href="#org9cb4772">7.12. <code>2020-06-11</code></a></li>
<li><a href="#org5bf9548">7.13. <code>2020-06-07</code></a></li>
<li><a href="#org5b4c07d">7.14. <code>2020-06-06</code></a></li>
<li><a href="#orge7b3348">7.15. <code>2020-06-05</code></a></li>
<li><a href="#orga10a342">7.16. <code>2020-06-05</code></a></li>
<li><a href="#org02daacd">7.17. <code>2020-06-04</code></a></li>
<li><a href="#orgab6665a">7.18. <code>2020-05-31</code></a></li>
<li><a href="#org038d39a">7.19. <code>2020-05-30</code></a></li>
<li><a href="#orgfb10b3c">7.20. <code>2020-05-16</code></a></li>
<li><a href="#orgbaf938a">7.21. <code>2020-05-15</code></a></li>
<li><a href="#org57c58b9">7.22. <code>2020-05-14</code></a></li>
<li><a href="#org0d9e64c">7.23. <code>2020-05-13</code></a></li>
<li><a href="#org6ea53b8">7.24. <code>2020-05-10</code></a></li>
<li><a href="#orgf4ce6ef">7.25. <code>2020-05-09</code></a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="org5db62ce" class="figure">
<p><a href="https://melpa.org/#/calibredb"><img src="https://melpa.org/packages/calibredb-badge.svg" alt="calibredb-badge.svg" /></a>
</p>
</div>

<div id="outline-container-org8299606" class="outline-2">
<h2 id="org8299606"><span class="section-number-2">1.</span> Description</h2>
<div class="outline-text-2" id="text-1">
<p>
Yet another <a href="https://calibre-ebook.com/">calibre</a> client for emacs.
</p>


<div id="org82291ad" class="figure">
<p><img src="img/dashboard.jpg" alt="dashboard.jpg" />
</p>
</div>

<p>
This package integrates calibre (using <b>calibredb</b>) into emacs.
</p>

<ol class="org-ol">
<li>Powerful ebook dashboard.</li>
<li>Manage ebooks, actually not only ebooks!</li>
<li>Fetch metadata from online sources incl. automatic detection of ISBN for pdf
and djvu files <b>(automatic detection of ISBN requires pdf-tools and djvu
package for pdf and djvu files respectively)</b></li>
<li>Manage Ebooks&rsquo; libraries and virtual libraries.</li>
<li>Customized Metadata: Tag, comment, highlight, favorite, archive etc.</li>
<li>Quick search, filter, make actions on items with ivy and helm.</li>
<li>Org-ref support.</li>
</ol>
</div>

<div id="outline-container-org16ea72a" class="outline-3">
<h3 id="org16ea72a"><span class="section-number-3">1.1.</span> Related package</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>toc-mode (easily manage pdf/djvu document&rsquo;s Table Of Contents)</li>
<li>centaur-tabs/awesome-tab (Enable tab in emacs, turn eamcs into a modern multiple tabs pdf/epub reader.)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgaa9e02d" class="outline-2">
<h2 id="orgaa9e02d"><span class="section-number-2">2.</span> Installation</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org2dc87cf" class="outline-3">
<h3 id="org2dc87cf"><span class="section-number-3">2.1.</span> Install sqlite and calibre</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org56fd9a7" class="outline-4">
<h4 id="org56fd9a7"><span class="section-number-4">2.1.1.</span> macOS</h4>
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">
<pre class="src src-sh">brew install sqlite
</pre>
</div>

<p>
Download calibre&rsquo;s DMG file from <a href="https://calibre-ebook.com/download_osx">https://calibre-ebook.com/download_osx</a>, install calibre.app to /Applications
</p>
</div>
</div>

<div id="outline-container-orgd2242fe" class="outline-4">
<h4 id="orgd2242fe"><span class="section-number-4">2.1.2.</span> Windows</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
With chocolatey
</p>
<div class="org-src-container">
<pre class="src src-sh">choco install sqlite calibre
</pre>
</div>
</div>
</div>

<div id="outline-container-org0f66b20" class="outline-4">
<h4 id="org0f66b20"><span class="section-number-4">2.1.3.</span> Linux</h4>
<div class="outline-text-4" id="text-2-1-3">
<p>
For example, in Ubuntu 18.04:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install sqlite3 calibre
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge4cce87" class="outline-3">
<h3 id="orge4cce87"><span class="section-number-3">2.2.</span> Install calibredb.el</h3>
<div class="outline-text-3" id="text-2-2">
<p>
It&rsquo;s available on <a href="https://melpa.org/">Melpa</a> :
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x package-install calibredb
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf071641" class="outline-3">
<h3 id="orgf071641"><span class="section-number-3">2.3.</span> Spacemacs Layer</h3>
<div class="outline-text-3" id="text-2-3">
<p>
For Spacemacs <a href="https://github.com/dalanicolai/calibre-layer">this calibre-layer</a> implements calibre.el with evilified keybindings
</p>
</div>
</div>
</div>

<div id="outline-container-org3c2e1ee" class="outline-2">
<h2 id="org3c2e1ee"><span class="section-number-2">3.</span> Configuration</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgec9e6ff" class="outline-3">
<h3 id="orgec9e6ff"><span class="section-number-3">3.1.</span> Quick Start</h3>
<div class="outline-text-3" id="text-3-1">
</div>
<div id="outline-container-org4625f73" class="outline-4">
<h4 id="org4625f73"><span class="section-number-4">3.1.1.</span> require</h4>
<div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #97365B;">require</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">calibredb</span><span style="color: #3B6EA8;">)</span>
<span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-root-dir</span> <span style="color: #4F894C;">"~/OneDrive/Doc/Calibre"</span><span style="color: #3B6EA8;">)</span>
<span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-db-dir</span> <span style="color: #97365B;">(</span><span style="color: #97365B;">expand-file-name</span> <span style="color: #4F894C;">"metadata.db"</span> <span style="color: #842879;">calibredb-root-dir</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
<span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-library-alist</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">(</span><span style="color: #4F894C;">(</span><span style="color: #4F894C;">"~/OneDrive/Doc/Calibre"</span><span style="color: #4F894C;">)</span>
                                <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"/Users/damonchan/Documents/Books Library"</span><span style="color: #4F894C;">)</span>
                                <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"/Users/damonchan/Documents/HELLO"</span><span style="color: #4F894C;">)</span>
                                <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"/Users/damonchan/Documents/Books"</span><span style="color: #4F894C;">)</span>
                                <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"/Users/damonchan/Documents/World"</span><span style="color: #4F894C;">)</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>

<p>
PS: If <code>sqlite3</code> and <code>calibredb</code> is in not in your system path, set them with
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">sql-sqlite-program</span> <span style="color: #4F894C;">"/usr/bin/sqlite3"</span><span style="color: #3B6EA8;">)</span>
<span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-program</span> <span style="color: #4F894C;">"/Applications/calibre.app/Contents/MacOS/calibredb"</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org903a530" class="outline-4">
<h4 id="org903a530"><span class="section-number-4">3.1.2.</span> use-package</h4>
<div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">use-package</span> calibredb
  <span style="color: #29838D;">:defer</span> t
  <span style="color: #29838D;">:config</span>
  <span style="color: #97365B;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-root-dir</span> <span style="color: #4F894C;">"~/OneDrive/Org/Doc/Calibre"</span><span style="color: #97365B;">)</span>
  <span style="color: #97365B;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-db-dir</span> <span style="color: #4F894C;">(</span><span style="color: #97365B;">expand-file-name</span> <span style="color: #4F894C;">"metadata.db"</span> <span style="color: #842879;">calibredb-root-dir</span><span style="color: #4F894C;">)</span><span style="color: #97365B;">)</span>
  <span style="color: #97365B;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-library-alist</span> <span style="color: #3B6EA8;">'</span><span style="color: #4F894C;">(</span><span style="color: #842879;">(</span><span style="color: #4F894C;">"~/OneDrive/Org/Doc/Calibre"</span><span style="color: #842879;">)</span>
                                  <span style="color: #842879;">(</span><span style="color: #4F894C;">"~/Documents/Books Library"</span><span style="color: #842879;">)</span>
                                  <span style="color: #842879;">(</span><span style="color: #4F894C;">"~/Documents/LIB1"</span><span style="color: #842879;">)</span>
                                  <span style="color: #842879;">(</span><span style="color: #4F894C;">"/Volumes/ShareDrive/Documents/Library/"</span><span style="color: #842879;">)</span><span style="color: #4F894C;">)</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge518dd9" class="outline-3">
<h3 id="orge518dd9"><span class="section-number-3">3.2.</span> Virtual Libraries</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Virtual libraries are some convenient shortcuts for quick filtering the Ebooks
by setting the <code>calibredb-search-filter</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-virtual-library-alist</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">(</span><span style="color: #4F894C;">(</span><span style="color: #4F894C;">"1. Development - work"</span> . <span style="color: #4F894C;">"work </span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">(</span><span style="color: #4F894C;">pdf</span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">|</span><span style="color: #4F894C;">epub</span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">)</span><span style="color: #4F894C;">"</span><span style="color: #4F894C;">)</span>
                                        <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"2. Read it later"</span> . <span style="color: #4F894C;">"Readit epub"</span><span style="color: #4F894C;">)</span>
                                        <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"3. Development - rust"</span> . <span style="color: #4F894C;">"rust"</span><span style="color: #4F894C;">)</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org49dba82" class="outline-3">
<h3 id="org49dba82"><span class="section-number-3">3.3.</span> Column width</h3>
<div class="outline-text-3" id="text-3-3">
<p>
You can configure the column width:
</p>

<p>
For example:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-id-width</span> <span style="color: #97365B; font-weight: bold;">4</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>Set positive to limit the width.</li>
<li>Set 0 to hide.</li>
<li>Set -1 to keep original length.</li>
</ul>

<p>
The following columns are supported:
</p>
<ul class="org-ul">
<li><code>calibredb-id-width</code></li>
<li><code>calibredb-format-width</code></li>
<li><code>calibredb-tag-width</code></li>
<li><code>calibredb-title-width</code></li>
<li><code>calibredb-author-width</code></li>
<li><code>calibredb-comment-width</code></li>
</ul>

<p>
Then in <code>*calibredb-search*</code> buffer, press <code>r</code> to refresh the library.
</p>
</div>
</div>

<div id="outline-container-org6aab194" class="outline-3">
<h3 id="org6aab194"><span class="section-number-3">3.4.</span> Size indicator</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Enable size indicator:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-size-show</span> t<span style="color: #3B6EA8;">)</span>
</pre>
</div>

<p>
Then in <code>*calibredb-search*</code> buffer, press <code>r</code> to refresh the library.
</p>
</div>
</div>

<div id="outline-container-orgfc5f0d5" class="outline-3">
<h3 id="orgfc5f0d5"><span class="section-number-3">3.5.</span> File format icons</h3>
<div class="outline-text-3" id="text-3-5">
<p>
You can choose <a href="https://github.com/domtronn/all-the-icons.el">all-the-icons</a>, <a href="https://github.com/seagle0128/icons-in-terminal.el">icons-in-terminal</a>, unicode icons to render the icons. You have
to install the icons packages by yourself, otherwise it would not work.
</p>

<p>
To enable all-the-icons:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-format-all-the-icons</span> t<span style="color: #3B6EA8;">)</span>
</pre>
</div>

<p>
To enable icons-in-terminal:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-format-icons-in-terminal</span> t<span style="color: #3B6EA8;">)</span>
</pre>
</div>

<p>
To use unicode icons,
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-format-character-icons</span> t<span style="color: #3B6EA8;">)</span>
</pre>
</div>

<p>
Then in <code>*calibredb-search*</code> buffer, press <code>r</code> to refresh the library.
</p>

<p>
Notice: Do not enable icons on big libraries, it will consume a lot of time than
you imagine.
</p>

<p>
TODO: Auto disable format icons when dealing with big libraries.
</p>
</div>
</div>

<div id="outline-container-org83c0a2d" class="outline-3">
<h3 id="org83c0a2d"><span class="section-number-3">3.6.</span> Configure to support org-ref</h3>
<div class="outline-text-3" id="text-3-6">
<p>
You can output a BibTex file which can be used in org-ref.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #97365B;">require</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">org-ref</span><span style="color: #3B6EA8;">)</span>
<span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-ref-default-bibliography</span> <span style="color: #97365B;">(</span><span style="color: #97365B;">concat</span> <span style="color: #4F894C;">(</span><span style="color: #97365B;">file-name-as-directory</span> <span style="color: #842879;">calibredb-root-dir</span><span style="color: #4F894C;">)</span> <span style="color: #4F894C;">"catalog.bib"</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
<span style="color: #3B6EA8;">(</span><span style="color: #29838D;">add-to-list</span> <span style="color: #3B6EA8;">'</span><span style="color: #9A7500;">org-ref-default-bibliography</span> <span style="color: #842879;">calibredb-ref-default-bibliography</span><span style="color: #3B6EA8;">)</span>
<span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> org-ref-get-pdf-filename-function <span style="color: #3B6EA8;">'</span><span style="color: #9A7500;">org-ref-get-mendeley-filename</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org98d9414" class="outline-3">
<h3 id="org98d9414"><span class="section-number-3">3.7.</span> keybindings</h3>
<div class="outline-text-3" id="text-3-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">defvar</span> <span style="color: #842879;">calibredb-show-mode-map</span>
  <span style="color: #97365B;">(</span><span style="color: #3B6EA8;">let</span> <span style="color: #4F894C;">(</span><span style="color: #842879;">(</span><span style="color: #29838D;">map</span> <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">make-sparse-keymap</span><span style="color: #3B6EA8;">)</span><span style="color: #842879;">)</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"?"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-entry-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"o"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-find-file</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"O"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-find-file-other-frame</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"V"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-open-file-with-default-tool</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"s"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"e"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-export-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"q"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-entry-quit</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"y"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-yank-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">","</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-quick-look</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"."</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-open-dired</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-/"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-rga</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-t"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--tags</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-a"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--author_sort</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-A"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--authors</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-T"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--title</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-c"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--comments</span><span style="color: #4F894C;">)</span>
    map<span style="color: #97365B;">)</span>
  <span style="color: #828b9b;">"Keymap for `</span><span style="color: #97365B;">calibredb-show-mode</span><span style="color: #828b9b;">'."</span><span style="color: #3B6EA8;">)</span>

<span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">defvar</span> <span style="color: #842879;">calibredb-search-mode-map</span>
  <span style="color: #97365B;">(</span><span style="color: #3B6EA8;">let</span> <span style="color: #4F894C;">(</span><span style="color: #842879;">(</span><span style="color: #29838D;">map</span> <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">make-sparse-keymap</span><span style="color: #3B6EA8;">)</span><span style="color: #842879;">)</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #842879;">[</span>mouse-3<span style="color: #842879;">]</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-search-mouse</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #842879;">(</span><span style="color: #29838D;">kbd</span> <span style="color: #4F894C;">"&lt;RET&gt;"</span><span style="color: #842879;">)</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-find-file</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"?"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"a"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-add</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"A"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-add-dir</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"c"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-clone</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"d"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-remove</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"D"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-remove-marked-items</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"j"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-next-entry</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"k"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-previous-entry</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"l"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-virtual-library-list</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"L"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-library-list</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"n"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-virtual-library-next</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"N"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-library-next</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"p"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-virtual-library-previous</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"P"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-library-previous</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"s"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"S"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-switch-library</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"o"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-find-file</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"O"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-find-file-other-frame</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"v"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-view</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"V"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-open-file-with-default-tool</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">","</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-quick-look</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"."</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-open-dired</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"y"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-yank-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"b"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-catalog-bib-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"e"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-export-dispatch</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"r"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-search-refresh-and-clear-filter</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"R"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-search-clear-filter</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"q"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-search-quit</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"m"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-mark-and-forward</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"f"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-toggle-favorite-at-point</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"x"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-toggle-archive-at-point</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"h"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-toggle-highlight-at-point</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"u"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-unmark-and-forward</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"i"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-edit-annotation</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #842879;">(</span><span style="color: #29838D;">kbd</span> <span style="color: #4F894C;">"&lt;DEL&gt;"</span><span style="color: #842879;">)</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-unmark-and-backward</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #842879;">(</span><span style="color: #29838D;">kbd</span> <span style="color: #4F894C;">"&lt;backtab&gt;"</span><span style="color: #842879;">)</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-toggle-view</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #842879;">(</span><span style="color: #29838D;">kbd</span> <span style="color: #4F894C;">"TAB"</span><span style="color: #842879;">)</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-toggle-view-at-point</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-n"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-show-next-entry</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-p"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-show-previous-entry</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"/"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-search-live-filter</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-t"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--tags</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-a"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--author_sort</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-A"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--authors</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-T"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--title</span><span style="color: #4F894C;">)</span>
    <span style="color: #4F894C;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"\M-c"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-set-metadata--comments</span><span style="color: #4F894C;">)</span>
    map<span style="color: #97365B;">)</span>
  <span style="color: #828b9b;">"Keymap for `</span><span style="color: #97365B;">calibredb-search-mode</span><span style="color: #828b9b;">'."</span><span style="color: #3B6EA8;">)</span>

</pre>
</div>

<p>
PS: Keybindings might be changed in future versions.
</p>
</div>
</div>
</div>

<div id="outline-container-org5a2f76c" class="outline-2">
<h2 id="org5a2f76c"><span class="section-number-2">4.</span> Workflows</h2>
<div class="outline-text-2" id="text-4">
<p>
There are three ways to manage your ebooks:
</p>
</div>
<div id="outline-container-org006fecb" class="outline-3">
<h3 id="org006fecb"><span class="section-number-3">4.1.</span> Start with <code>calibredb</code></h3>
<div class="outline-text-3" id="text-4-1">
<p>
First,  <code>M-x calibredb</code> to enter ebook dashboard.
You can perform the following actions:
</p>
<ul class="org-ul">
<li>Open/View the ebook</li>
<li>Open Dired the ebook located</li>
<li>Fetch (from Google and Amazon.com) and set metadata on the ebook under cursor</li>
<li>Set metadata on marked ebooks</li>
<li>Add/Remove ebooks on current library</li>
<li>Export the ebook under cursor</li>
<li>Clone/Switch/Jump to different libraries</li>
<li>Live filter the results</li>
<li>Generate Catalog, such as a BibTex file</li>
<li>Favorite, highlight and archive the items</li>
</ul>
</div>
</div>

<div id="outline-container-org8448519" class="outline-3">
<h3 id="org8448519"><span class="section-number-3">4.2.</span> Start with <code>calibredb-find-helm</code> or <code>calibredb-find-counsel</code></h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><code>M-x calibredb-find-helm</code> or <code>calibredb-find-counsel</code> to enter the ebook list</li>
<li><code>C-i</code> (Helm) <code>C-o</code> (Counsel) to enter the action menus.</li>
</ul>
</div>
</div>
<div id="outline-container-org6a5fd97" class="outline-3">
<h3 id="org6a5fd97"><span class="section-number-3">4.3.</span> Start with <code>calibredb-list</code></h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li><code>M-x calibredb-list</code> to enter ebook dashboard (buffer <code>*calibredb-list*</code>)</li>
</ul>

<p>
PS:
Workflows might be slightly changed in future versions.
</p>

<p>
Notice: This package use <b><a href="https://manual.calibre-ebook.com/generated/en/calibredb.html">calibredb</a></b> update the <b>metadata.db</b> file rather than use sqlite to update
the database. <b>Sqlite</b> is only used for reading rather than updating and deleting. It should be
safe to modify the database with this package, but it is still very important to do backup by
yourself. For example, with cloud services.
</p>
</div>
</div>
</div>

<div id="outline-container-org509bd10" class="outline-2">
<h2 id="org509bd10"><span class="section-number-2">5.</span> Q&amp;A</h2>
<div class="outline-text-2" id="text-5">
<p>
The keybindings mentioned below are referenced from
</p>
<a href="#keybindings">keybindings</a>.
</div>

<div id="outline-container-org17c469c" class="outline-3">
<h3 id="org17c469c"><span class="section-number-3">5.1.</span> Transient commands</h3>
<div class="outline-text-3" id="text-5-1">
<p>
<code>calibredb</code> supports <code>Transient commands</code> just like <code>magit</code>. Most of the features are binded in <code>Transient commands</code>. You can press <code>?</code> to checkout.
</p>

<ul class="org-ul">
<li><code>calibredb-dispatch</code>: Invoke a calibredb command from a list of available commands in <code>*calibredb-search*</code> buffer.</li>
<li><code>calibredb-entry-dispatch</code>: Invoke a calibredb command from a list of available commands in <code>*calibredb-entry*</code> buffer.</li>
<li><code>calibredb-set-metadata-dispatch</code>: Set metadata.</li>
<li><code>calibredb-export-dispatch</code>: Export files.</li>
<li><code>calibredb-catalog-bib-dispatch</code>: BibTex operation.</li>
<li><code>calibredb-yank-dispatch</code>: Invoke a Yank operation.</li>
</ul>
</div>
</div>

<div id="outline-container-org5c86fca" class="outline-3">
<h3 id="org5c86fca"><span class="section-number-3">5.2.</span> What is my working library?</h3>
<div class="outline-text-3" id="text-5-2">
<p>
<code>M-x calibredb</code>, your current library path shows in the header in buffer <code>*calibredb-search*</code>
Besides, variable <code>calibredb-root-dir</code> also saves the current library location.
</p>
</div>
</div>

<div id="outline-container-org4382cff" class="outline-3">
<h3 id="org4382cff"><span class="section-number-3">5.3.</span> How to open an ebook?</h3>
<div class="outline-text-3" id="text-5-3">
<ol class="org-ol">
<li><code>M-x calibredb</code>
<ul class="org-ul">
<li>In <code>*calibredb-search*</code> buffer, move the cursor to the ebook you want to open.</li>
<li>Press <code>RET/o/O/V</code> to open it.</li>
<li>If you are using macOS, you can also press <code>,</code> to quick look the ebook.</li>
</ul></li>

<li><code>M-x</code> <code>calibredb-find-helm</code> or <code>calibredb-find-counsel</code>
<ul class="org-ul">
<li>Select the ebook you want to open in the list</li>
<li>Press <code>RET</code> to open it.</li>
</ul></li>

<li><code>M-x calibredb</code>
<ul class="org-ul">
<li>In <code>*calibredb-search*</code> buffer, move the cursor to the ebook and press <code>v</code> to
show details, or just <code>Right Click</code> on the ebook.</li>
<li>Then in <code>*calibredb-entry*</code> buffer, press <code>o/O/V</code> to open it.</li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-org5149a27" class="outline-3">
<h3 id="org5149a27"><span class="section-number-3">5.4.</span> How to add ebooks?</h3>
<div class="outline-text-3" id="text-5-4">
<ol class="org-ol">
<li><code>M-x calibredb-add</code>, select, mark ebooks (only ivy supports mark/unmark currently -
with <code>ivy-hydra</code>, in ivy-window, press <code>m</code> to mark, <code>DEL</code> or <code>u</code> to unmark.
Other engines can only select one item) and add to current library.</li>

<li><code>M-x calibredb-add-dir</code> and select one directory, all supported formats will be added into current library.</li>
</ol>

<p>
Please notice: Add books may fail! There are some reasons:
</p>
<ul class="org-ul">
<li>The book already exists in the database. If you still want to add the duplicated books, you can set <code>calibredb-add-duplicate</code> to <code>Non-Nil</code>.</li>
<li>Not all book formats are supported. If you can not add a specific book, check the logs in <code>*calibredb*</code> buffer.</li>
</ul>
</div>
</div>

<div id="outline-container-org25ec65f" class="outline-3">
<h3 id="org25ec65f"><span class="section-number-3">5.5.</span> How to remove ebooks?</h3>
<div class="outline-text-3" id="text-5-5">
<ol class="org-ol">
<li><code>M-x calibredb</code>
<ul class="org-ul">
<li>move the cursor to the ebook you want to delete, press <code>d</code>, calibredb will
ask you to delete or not.</li>
</ul></li>

<li><code>M-x</code> <code>calibredb-find-helm</code> or <code>calibredb-find-counsel</code>
<ul class="org-ul">
<li>Select the ebook you want to delete in the list</li>
<li><code>C-i</code> (Helm) <code>C-o</code> (Counsel) to enter the action menu.</li>
<li>Perform remove action as shown in the menu.</li>
</ul></li>
</ol>

<p>
PS: If you want to delete in bulk with marked items, use <code>calibredb-remove-marked-items</code>. <code>m</code> to mark items, <code>D</code> to bulk delete.
</p>
</div>
</div>

<div id="outline-container-org79afff1" class="outline-3">
<h3 id="org79afff1"><span class="section-number-3">5.6.</span> How to switch virtual libraries?</h3>
<div class="outline-text-3" id="text-5-6">
<p>
First, set <code>calibredb-library-alist</code> to include the calibre virtual libraries.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-virtual-library-alist</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">(</span><span style="color: #4F894C;">(</span><span style="color: #4F894C;">"1. Development - work"</span> . <span style="color: #4F894C;">"work </span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">(</span><span style="color: #4F894C;">pdf</span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">|</span><span style="color: #4F894C;">epub</span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">)</span><span style="color: #4F894C;">"</span><span style="color: #4F894C;">)</span>
                                        <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"2. Read it later"</span> . <span style="color: #4F894C;">"Readit epub"</span><span style="color: #4F894C;">)</span>
                                        <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"3. Development - rust"</span> . <span style="color: #4F894C;">"rust"</span><span style="color: #4F894C;">)</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>
<p>
Then, in <code>*calibredb-search*</code> buffer,
</p>
<ul class="org-ul">
<li>Press <code>l</code> to open the library list and select the library.</li>
<li>Press <code>n</code> or <code>p</code> to switch to next or previous library.</li>
</ul>

<p>
Or, in <code>*calibredb-search*</code> buffer, call <code>calibredb-virtual-library-list</code> directly and select
the library.
</p>
</div>
</div>

<div id="outline-container-orgfd64073" class="outline-3">
<h3 id="orgfd64073"><span class="section-number-3">5.7.</span> How to switch libraries?</h3>
<div class="outline-text-3" id="text-5-7">
<p>
Set <code>calibredb-library-alist</code> to include the calibre libraries.
</p>

<p>
Make sure the libraries are valid. Create libraries using Calibre GUI or <code>M-x
calibredb-clone</code> to clone the existing library to a new library, before setting
it in <code>calibredb-library-alist</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-library-alist</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">(</span><span style="color: #4F894C;">(</span><span style="color: #4F894C;">"~/OneDrive/Doc/Calibre"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"/Users/damonchan/Documents/Books Library"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"/Users/damonchan/Documents/HELLO"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"/Users/damonchan/Documents/Books"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"/Users/damonchan/Documents/World"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"http://192.168.1.2/opds"</span> <span style="color: #4F894C;">"account"</span> <span style="color: #4F894C;">"password"</span><span style="color: #4F894C;">)</span> <span style="color: #8b94a5;">; </span><span style="color: #8b94a5;">https://github.com/janeczku/calibre-web</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"http://opds.oreilly.com/opds/"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"https://bookserver.archive.org/catalog/"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"http://arxiv.maplepop.com/catalog/"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"https://m.gutenberg.org/ebooks.opds/"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"http://www.feedbooks.com/catalog.atom"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"https://tatsu-zine.com/catalogs.opds"</span><span style="color: #4F894C;">)</span>
                                  <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"http://aozora.textlive.net/catalog.opds"</span><span style="color: #4F894C;">)</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>
<p>
Then, in <code>*calibredb-search*</code> buffer,
</p>
<ul class="org-ul">
<li>Press <code>L</code> to open the library list and select the library.</li>
<li>Press <code>N</code> or <code>P</code> to switch to next or previous library.</li>
</ul>

<p>
Or in <code>*calibredb-search*</code> buffer, call <code>calibredb-library-list</code> directly and select
the library.
</p>

<p>
If the library is not defined in <code>calibredb-library-alist</code>, you can call
<code>calibredb-switch-library</code> and select the path of the library that you want to
switch temporarily.
</p>
</div>
</div>

<div id="outline-container-orgb869bf7" class="outline-3">
<h3 id="orgb869bf7"><span class="section-number-3">5.8.</span> How to set metadata on ebooks?</h3>
<div class="outline-text-3" id="text-5-8">
<ul class="org-ul">
<li>In <code>*calibredb-search*</code> buffer, <code>m/DEL/u</code> to mark/unmark backward/unmark forward items, and <code>s</code> to set metadata
in bulk. If you do not mark any items, actions will be performed on the item
under cursor.</li>
<li>In <code>*calibredb-entry*</code> buffer, press <code>s</code> to set metadata.</li>
<li>In <code>*calibredb-search*</code> buffer, press <code>s f</code> to fetch metadata by
author and title or <code>s i</code> to fetch by ISBN. For fetching by author and title
enter one (or more) full lastnames of the author(s) (or delete redundant input
from initial input). For fetching by ISBN enter the ISBN number (usually can
be found and copied from on of the first pages of a book). As the title may
contain the ISBN it is set as initial input. Wait few second for Emacs to
retrieve metadata from the sources. Subsequently use <code>C-M-n/C-M-p</code> to select and
preview the source to use for adding the metadata to the document. Press <code>RET</code>
to add selected metadata to source.</li>
<li>In <code>*calibredb-search*</code> buffer, press <code>s d</code> to fetch metadata by identifier.</li>
</ul>

<p>
Tips: You can filter the result via <code>/</code> before setting the metadata.
</p>
</div>

<div id="outline-container-orgfbaa56b" class="outline-4">
<h4 id="orgfbaa56b"><span class="section-number-4">5.8.1.</span> About <code>fetch-ebook-metadata</code></h4>
<div class="outline-text-4" id="text-5-8-1">
<p>
We are using <code>fetch-ebook-metadata</code> cli tool to fetch the metadata. However,
fetching ebook metadata is a little tricky, especially about the sources
configurations. Since the settings on calibre GUI would affect the
<code>fetch-ebook-metadata</code> cli. Follow below steps to setup.
</p>

<ol class="org-ol">
<li>Set up the source settings in Calibre GUI. You are right, you need to configure the settings on GUI first.
<ul class="org-ul">
<li>Preferences -&gt; Preferences -&gt; Sharing/Metadata download</li>
<li>Tick &rsquo;source&rsquo; you like to use</li>
<li>Set the &rsquo;Cover priority&rsquo;</li>
<li>Apply</li>
</ul></li>
<li>Specify the list of metadata download plugins to use, this should be the same as the calibre GUI configuration.</li>
</ol>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-fetch-metadata-source-list</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">(</span><span style="color: #4F894C;">"Google"</span> <span style="color: #4F894C;">"Amazon.com"</span> <span style="color: #4F894C;">"Douban Books"</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb42db17" class="outline-3">
<h3 id="orgb42db17"><span class="section-number-3">5.9.</span> How to mark favorite/highlight/archive on ebooks?</h3>
<div class="outline-text-3" id="text-5-9">
<ul class="org-ul">
<li><p>
In <code>*calibredb-search*</code> buffer, <code>m</code> to mark the items, <code>f/h/x</code> to toggle
favorite/highlight/archive status on marked items.
</p>

<p>
Demo:
</p></li>
</ul>

<div id="org724f09d" class="figure">
<p><img src="img/favorite_highlight_archive.png" alt="favorite_highlight_archive.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org1b46327" class="outline-3">
<h3 id="org1b46327"><span class="section-number-3">5.10.</span> How to do live filtering?</h3>
<div class="outline-text-3" id="text-5-10">
<ul class="org-ul">
<li>Press <code>/</code> to start live filtering.</li>
</ul>

<p>
Minibuffer shows <code>Filter (live)</code>, input some texts to start searching (REGEX is supported).
</p>

<p>
The following columns will be searched:
</p>
<ul class="org-ul">
<li>id</li>
<li>text (comment)</li>
<li>tag</li>
<li>title</li>
<li>format</li>
<li>author<sub>sort</sub></li>
<li>ids</li>
</ul>

<p>
If the keyword occurs in any of the columns above, the matched ebook records will
be shown.
</p>

<p>
Here is the demo:
<img src="img/filter.gif" alt="filter.gif" />
</p>

<p>
If you want to search by one type of metadata, for example, by tag, please check:
</p>
<a href="#how-to-do-group-filtering">How to do group filtering?</a>.
</div>
</div>

<div id="outline-container-org4b2bfb2" class="outline-3">
<h3 id="org4b2bfb2"><span class="section-number-3">5.11.</span> How to do group filtering?</h3>
<div class="outline-text-3" id="text-5-11">
<p>
Press <code>g</code>, then press
</p>
<ul class="org-ul">
<li>t: fitler by tag</li>
<li>f: filter by format</li>
<li>a: filter by author</li>
<li>d: filter by date</li>
<li>l: filter by virutal library</li>
<li>L: filter by library</li>
<li>r: reset (clearing the search filter)</li>
</ul>

<p>
For example, after pressing <code>g t</code> then select any tags, group filter for tag is
enabled. In this case, minibuffer shows <code>Filter (tag)</code>, if you press <code>/</code>, it only search in tag.
</p>

<p>
If you press <code>g r</code>, you can switch back to live filtering, and minibuffer will show <code>Filter (live)</code>.
</p>
</div>
</div>

<div id="outline-container-orgdfa3045" class="outline-3">
<h3 id="orgdfa3045"><span class="section-number-3">5.12.</span> How to do quick group filtering?</h3>
<div class="outline-text-3" id="text-5-12">
<ul class="org-ul">
<li>Click the <code>calibredb-favorite-icon</code>, authors, file format, and tags.</li>
<li><p>
Press <code>r/R</code> to reset the filtering.
</p>

<p>
Demo:
</p>


<div id="org9b8014e" class="figure">
<p><img src="img/quick_filter.gif" alt="quick_filter.gif" />
</p>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgc49d4bf" class="outline-3">
<h3 id="orgc49d4bf"><span class="section-number-3">5.13.</span> How to do sorting?</h3>
<div class="outline-text-3" id="text-5-13">
<p>
Press <code>o</code>, then press
</p>
<ul class="org-ul">
<li>o: toggle the order (desc or asc)</li>
<li>i: sort by id</li>
<li>t: sort by title</li>
<li>f: sort by format</li>
<li>a: sort by author</li>
<li>d: sort by date</li>
<li>p: sort by pubdate</li>
<li>T: sort by Tag</li>
<li>s: sort by size</li>
<li>l: sort by language</li>
</ul>

<p>
Configure <code>calibredb-sort-by</code> and <code>calibredb-order</code> to control the default sorting.
</p>
</div>
</div>

<div id="outline-container-orga7ffa9f" class="outline-3">
<h3 id="orga7ffa9f"><span class="section-number-3">5.14.</span> How to interact with org-ref?</h3>
<div class="outline-text-3" id="text-5-14">
<ul class="org-ul">
<li><p>
Setup org-ref
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">require</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">org-ref</span><span style="color: #3B6EA8;">)</span>
  <span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-ref-default-bibliography</span> <span style="color: #4F894C;">"~/Desktop/catalog.bib"</span><span style="color: #3B6EA8;">)</span>
  <span style="color: #3B6EA8;">(</span><span style="color: #29838D;">add-to-list</span> <span style="color: #3B6EA8;">'</span><span style="color: #9A7500;">org-ref-default-bibliography</span> <span style="color: #842879;">calibredb-ref-default-bibliography</span><span style="color: #3B6EA8;">)</span>
  <span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> org-ref-get-pdf-filename-function <span style="color: #3B6EA8;">'</span><span style="color: #9A7500;">org-ref-get-mendeley-filename</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>
<p>
or
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">    <span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">use-package!</span> org-ref
    <span style="color: #29838D;">:after-call</span> calibredb
    <span style="color: #29838D;">:config</span>
    <span style="color: #97365B;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-ref-default-bibliography</span> <span style="color: #4F894C;">"~/Desktop/catalog.bib"</span><span style="color: #97365B;">)</span>
    <span style="color: #97365B;">(</span><span style="color: #29838D;">add-to-list</span> <span style="color: #3B6EA8;">'</span><span style="color: #9A7500;">org-ref-default-bibliography</span> <span style="color: #842879;">calibredb-ref-default-bibliography</span><span style="color: #97365B;">)</span>
    <span style="color: #97365B;">(</span><span style="color: #3B6EA8;">setq</span> org-ref-get-pdf-filename-function <span style="color: #3B6EA8;">'</span><span style="color: #9A7500;">org-ref-get-mendeley-filename</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
</pre>
</div></li>

<li>In <code>*calibredb-search*</code> buffer, <code>b</code> <code>b</code> to generate the ebook catalogs with a BibTex
file.</li>
<li>The BibTex file is generated under current library path - <code>calibredb-root-dir</code>.</li>
<li>Every time you switch your library, the corresponding BibTex file path will
added into <code>org-ref-default-bibliography</code> temporarily.</li>
<li><p>
In an org file, <code>C-c ]</code> to insert cite.
</p>

<p>
Demo:
<img src="img/bib.gif" alt="bib.gif" />
</p></li>
</ul>
</div>
</div>


<div id="outline-container-orge5d9998" class="outline-3">
<h3 id="orge5d9998"><span class="section-number-3">5.15.</span> Why the loading time is so long?</h3>
<div class="outline-text-3" id="text-5-15">
<p>
For some big libraries, such as the libraries that has 10000+ books, the package
will need a few seconds to query and decode all the metadata. This will be
improved in future versions.
</p>

<p>
You should know the following test results and behaviors so that it will not
frustrate you when dealing with big libraries:)
</p>

<ol class="org-ol">
<li>Tested with a library that has 8668 books, using 4.2 GHz Intel Core i7 in
macOS 10.13.6, around <code>2</code> to <code>3</code> seconds to query the database.</li>
<li><b>DO NOT</b> setq <code>calibredb-format-icon</code> t on big library. Tested with a library
that has 8668 books, using 4.2 GHz Intel Core i7 in macOS 10.13.6, around <code>37</code>
seconds to query the database.</li>
<li>The first time to enter <code>calibredb</code>, is to query and decode the whole database.
After that, all data will be saved in <code>calibredb-search-entries</code>. Therefore,
the next time to load the library is just reading <code>calibredb-search-entries</code>
and show again. And you can feel much happier starting from the second time.</li>
<li>Update metadata, refresh dashboard, and switch library will re-query and
decode the whole database.</li>
</ol>
</div>
</div>

<div id="outline-container-org8fa3961" class="outline-3">
<h3 id="org8fa3961"><span class="section-number-3">5.16.</span> Can not remember the keybindings?</h3>
<div class="outline-text-3" id="text-5-16">
<p>
Press <code>?</code>, it will show you almost all actions.
</p>

<p>
Demo:
</p>

<div id="orgeda1a18" class="figure">
<p><img src="img/details.gif" alt="details.gif" />
</p>
</div>
</div>
</div>

<div id="outline-container-org3955874" class="outline-3">
<h3 id="org3955874"><span class="section-number-3">5.17.</span> How to edit annotation with org-mode?</h3>
<div class="outline-text-3" id="text-5-17">
<p>
In <code>*calibredb-search*</code> buffer,
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-edit-annotation
</pre>
</div>
<p>
Or press <code>i</code>.
</p>

<p>
By default, the annotation would be saved to <code>comments</code> field. If you want to
change to other filed, please set with the following statement:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-annotation-field</span> <span style="color: #4F894C;">"comments"</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>

<p>
Please notice: Due to the limitation of <b>calibredb</b>, the blank new lines will be deleted.
</p>
</div>
</div>

<div id="outline-container-org2fa6825" class="outline-3">
<h3 id="org2fa6825"><span class="section-number-3">5.18.</span> How to search in ebooks directly?</h3>
<div class="outline-text-3" id="text-5-18">
<p>
We wrap <code>counsel-ag</code> in <code>calibredb-rga</code>, using the power of <a href="https://github.com/phiresky/ripgrep-all">ripgrep-all</a>.
First, install <a href="https://github.com/phiresky/ripgrep-all">ripgrep-all</a>,
then in <code>*calibredb-search*</code>, <code>*calibredb-entry*</code> buffer or under <code>pdf-view-mode</code> / <code>nov-view-mode</code>,
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-rga
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0577bf" class="outline-3">
<h3 id="orgb0577bf"><span class="section-number-3">5.19.</span> How to interact with calibredb files in org files?</h3>
<div class="outline-text-3" id="text-5-19">
<p>
In <code>*calibredb-search*</code> buffer,
</p>
<ul class="org-ul">
<li><code>y y</code> copy as calibredb link. If you click the link, it will open the corresponding <code>*calibredb-entry*</code> buffer.</li>
<li><code>y f</code> copy as file org link. If you click the link, it will open the file directly.</li>
</ul>
</div>
</div>

<div id="outline-container-org26e7975" class="outline-3">
<h3 id="org26e7975"><span class="section-number-3">5.20.</span> More examples?</h3>
<div class="outline-text-3" id="text-5-20">
<p>
Please check
</p>
<a href="#keybindings">keybindings</a> .
<p>
All are self documented.
</p>
</div>
</div>
</div>

<div id="outline-container-org75108ff" class="outline-2">
<h2 id="org75108ff"><span class="section-number-2">6.</span> Supported Features</h2>
<div class="outline-text-2" id="text-6">
<p>
For more details on the actions, check the official calibre documents:
<a href="https://manual.calibre-ebook.com/generated/en/calibredb.html">https://manual.calibre-ebook.com/generated/en/calibredb.html</a>
</p>
</div>

<div id="outline-container-orgdbc3127" class="outline-3">
<h3 id="orgdbc3127"><span class="section-number-3">6.1.</span> calibredb</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Enter calibre emacs client, a new buffer called <code>*calibredb-search*</code> with <code>calibredb-search-mode</code>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb
</pre>
</div>
<p>
<code>RET</code> open the entry
</p>

<p>
To toggle between detail view or compact view.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-toggle-view
</pre>
</div>

<p>
TODO:
</p>
<ul class="org-ul">
<li>Multiple dashboard with different libraries.</li>
<li>Sorting.</li>
</ul>
</div>
</div>

<div id="outline-container-orge39793d" class="outline-3">
<h3 id="orge39793d"><span class="section-number-3">6.2.</span> calibredb-search-live-filter</h3>
<div class="outline-text-3" id="text-6-2">
<p>
In <code>*calibredb-search*</code>,
perform live filtering:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-search-live-filter
</pre>
</div>

<p>
The following columns will be searched:
</p>
<ul class="org-ul">
<li>id</li>
<li>text (comment)</li>
<li>tag</li>
<li>title</li>
<li>format</li>
<li>author<sub>sort</sub></li>
<li>ids</li>
</ul>

<p>
If the keyword occurs in any of the columns above, the matched ebook record will
be shown.
</p>

<ol class="org-ol">
<li>Live filter searches the results in <code>calibredb-full-entries</code> rather than query
the database.</li>
<li>Keywords are separated by &ldquo;Spaces&rdquo; (AND operation, mainly used to narrow down
the results, the more spaces you insert, the fewer results.)</li>
<li>Each keyword supports REGEX.</li>
</ol>

<p>
For example, to search Ebooks may contain a tag - <b>work</b>, and the format maybe pdf
or epub. You can insert <code>work \(pdf\|epub\)</code> (Notice the single backslash) in mini buffer.
</p>

<p>
If you set the filter keywords in <code>calibredb-virtual-library-alist</code>, you should
(Notice the double backslashes):
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">setq</span> <span style="color: #842879;">calibredb-virtual-library-alist</span> <span style="color: #3B6EA8;">'</span><span style="color: #97365B;">(</span><span style="color: #4F894C;">(</span><span style="color: #4F894C;">"1. Development - work"</span> . <span style="color: #4F894C;">"work </span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">(</span><span style="color: #4F894C;">pdf</span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">|</span><span style="color: #4F894C;">epub</span><span style="color: #3B6EA8; font-weight: bold;">\\</span><span style="color: #3B6EA8; font-weight: bold;">)</span><span style="color: #4F894C;">"</span><span style="color: #4F894C;">)</span>
                                        <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"2. Read it later"</span> . <span style="color: #4F894C;">"Readit epub"</span><span style="color: #4F894C;">)</span>
                                        <span style="color: #4F894C;">(</span><span style="color: #4F894C;">"3. Development - rust"</span> . <span style="color: #4F894C;">"rust"</span><span style="color: #4F894C;">)</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
</pre>
</div>


<p>
Check REGEX <a href="https://www.gnu.org/software/emacs/manual/html_node/efaq/Using-regular-expressions.html">https://www.gnu.org/software/emacs/manual/html_node/efaq/Using-regular-expressions.html</a>.
</p>

<p>
Tip: <code>*calibredb-search*</code>, <code>calibredb-find-counsel</code>, and <code>calibredb-find-helm</code> are sharing
the same results. Therefore, after the filtering in <code>*calibredb-search*</code>, you can do
second-level filter with <code>calibredb-find-counsel</code>, and <code>calibredb-find-helm</code>.
</p>
</div>
</div>

<div id="outline-container-orgbb38ba1" class="outline-3">
<h3 id="orgbb38ba1"><span class="section-number-3">6.3.</span> calibredb-find-helm</h3>
<div class="outline-text-3" id="text-6-3">
<p>
Use helm to list all ebooks
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-find-helm
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd951f3" class="outline-3">
<h3 id="orgfd951f3"><span class="section-number-3">6.4.</span> calibredb-find-counsel</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Use counsel to list all ebooks
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-find-counsel
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd9e050e" class="outline-3">
<h3 id="orgd9e050e"><span class="section-number-3">6.5.</span> calibredb-list</h3>
<div class="outline-text-3" id="text-6-5">
<p>
Generate an org buffer which contains all files&rsquo; cover images, titles and the file links.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-list
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf017d37" class="outline-3">
<h3 id="orgf017d37"><span class="section-number-3">6.6.</span> calibredb-clone</h3>
<div class="outline-text-3" id="text-6-6">
<p>
Create a clone of the current library. This creates a new, empty library that
has all the same custom columns, Virtual libraries and other settings as the
current library.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-clone
</pre>
</div>

<p>
Tips: Libraries can be used for any purposes, one for books, one for
lecture notes, one for research references etc.
</p>
</div>
</div>

<div id="outline-container-org5a0de61" class="outline-3">
<h3 id="org5a0de61"><span class="section-number-3">6.7.</span> calibredb-library-list</h3>
<div class="outline-text-3" id="text-6-7">
<p>
Switch library from library list defined in <code>calibredb-library-alist</code>.
If under <code>*calibredb-search*</code> buffer, it will auto refresh after
selecting the new item.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-library-list
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f6c15d" class="outline-3">
<h3 id="org7f6c15d"><span class="section-number-3">6.8.</span> calibredb-switch-library</h3>
<div class="outline-text-3" id="text-6-8">
<p>
Switch a library temporary by selecting a path.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-switch-library
</pre>
</div>
</div>
</div>

<div id="outline-container-org8a15649" class="outline-3">
<h3 id="org8a15649"><span class="section-number-3">6.9.</span> Show details</h3>
<div class="outline-text-3" id="text-6-9">
<p>
This action will get you to the book details buffer called <code>*calibredb-entry*</code>
</p>
</div>
</div>

<div id="outline-container-org70a0d41" class="outline-3">
<h3 id="org70a0d41"><span class="section-number-3">6.10.</span> Dispatch</h3>
<div class="outline-text-3" id="text-6-10">
</div>
<div id="outline-container-org40238b9" class="outline-4">
<h4 id="org40238b9"><span class="section-number-4">6.10.1.</span> calibredb-dispatch</h4>
<div class="outline-text-4" id="text-6-10-1">
<p>
Under <code>*calilbredb-search*</code> or <code>*calilbredb-entry*</code> buffer, you can make actions on
selected item with <code>calibredb-dispatch</code>, just like <code>magit-dispatch</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-dispatch
</pre>
</div>
<p>
Or fire with keybinding <code>?</code>
</p>
</div>
</div>

<div id="outline-container-orgd4c3363" class="outline-4">
<h4 id="orgd4c3363"><span class="section-number-4">6.10.2.</span> calibredb-set-metadata-dispatch</h4>
<div class="outline-text-4" id="text-6-10-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-set-metadata-dispatch
</pre>
</div>
<p>
Or fire with keybinding <code>s</code>
</p>
</div>
</div>

<div id="outline-container-org4f92637" class="outline-4">
<h4 id="org4f92637"><span class="section-number-4">6.10.3.</span> calibredb-catalog-bib-dispatch</h4>
<div class="outline-text-4" id="text-6-10-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-catalog-bib-dispatch
</pre>
</div>
<p>
Or fire with keybinding <code>b</code>
</p>
</div>
</div>

<div id="outline-container-org3e66844" class="outline-4">
<h4 id="org3e66844"><span class="section-number-4">6.10.4.</span> calibredb-export-dispatch</h4>
<div class="outline-text-4" id="text-6-10-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-export-dispatch
</pre>
</div>
<p>
Or fire with keybinding <code>e</code>
</p>
</div>
</div>
</div>


<div id="outline-container-org64812bc" class="outline-3">
<h3 id="org64812bc"><span class="section-number-3">6.11.</span> add</h3>
<div class="outline-text-3" id="text-6-11">
<p>
To add a file into calibre, call
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-add
</pre>
</div>

<p>
To add a directory into calibre, call
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-add-dir
</pre>
</div>
</div>
</div>

<div id="outline-container-org51e592f" class="outline-3">
<h3 id="org51e592f"><span class="section-number-3">6.12.</span> remove</h3>
<div class="outline-text-3" id="text-6-12">
<p>
To remove an item, call
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-remove
</pre>
</div>

<p>
To remove the marked items, call
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-remove-marked-items
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc5b06a9" class="outline-3">
<h3 id="orgc5b06a9"><span class="section-number-3">6.13.</span> set<sub>metadata</sub></h3>
<div class="outline-text-3" id="text-6-13">
<p>
To set metadata,
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-set-metadata-dispatch
</pre>
</div>
</div>
</div>

<div id="outline-container-org63cf37b" class="outline-3">
<h3 id="org63cf37b"><span class="section-number-3">6.14.</span> Export</h3>
<div class="outline-text-3" id="text-6-14">
<p>
To export the ebook,
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-export-dispatch
</pre>
</div>
</div>
</div>

<div id="outline-container-org45fc8e7" class="outline-3">
<h3 id="org45fc8e7"><span class="section-number-3">6.15.</span> Yank</h3>
<div class="outline-text-3" id="text-6-15">
<p>
To yank the ebook as org links,
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-yank-dispatch
</pre>
</div>
</div>
</div>

<div id="outline-container-orgac8608a" class="outline-3">
<h3 id="orgac8608a"><span class="section-number-3">6.16.</span> Catalog</h3>
<div class="outline-text-3" id="text-6-16">
</div>
<div id="outline-container-orga9c09ef" class="outline-4">
<h4 id="orga9c09ef"><span class="section-number-4">6.16.1.</span> BibTex</h4>
<div class="outline-text-4" id="text-6-16-1">
<p>
Export the ebook catalogs to a BibTex file.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">M-x calibredb-catalog-bib-dispatch
</pre>
</div>
<p>
PS: Document can be found in <a href="https://github.com/kovidgoyal/calibre/blob/master/src/calibre/library/catalogs/bibtex.py">https://github.com/kovidgoyal/calibre/blob/master/src/calibre/library/catalogs/bibtex.py</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org5ea0db5" class="outline-3">
<h3 id="org5ea0db5"><span class="section-number-3">6.17.</span> calibredb-rga</h3>
<div class="outline-text-3" id="text-6-17">
<p>
Search in ebooks.
</p>
</div>
</div>
</div>

<div id="outline-container-orgd4e90cc" class="outline-2">
<h2 id="orgd4e90cc"><span class="section-number-2">7.</span> Logs</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org663bc4d" class="outline-3">
<h3 id="org663bc4d"><span class="section-number-3">7.1.</span> <code>2022-02-28</code></h3>
<div class="outline-text-3" id="text-7-1">
<p>
Version <b>2.11.0</b>:
</p>
<ul class="org-ul">
<li>Support opds</li>
<li>Add <code>calibredb-convert-program</code></li>
<li>Add <code>calibredb-device-dir</code></li>
<li>Support ebook conversion and export ebooks to device</li>
</ul>
</div>
</div>

<div id="outline-container-org8d2812d" class="outline-3">
<h3 id="org8d2812d"><span class="section-number-3">7.2.</span> <code>2021-06-02</code></h3>
<div class="outline-text-3" id="text-7-2">
<p>
Version <b>2.10.0</b>:
</p>
<ul class="org-ul">
<li>Change keybind for <code>calibredb-toggle-favorite-at-point</code> to <code>*</code> (original <code>f</code>)</li>
<li>Add <code>calibredb-filter-dispatch</code>, bind to <code>f</code></li>
<li>Add <code>calibredb-sort-dispatch</code>, bind to <code>o</code></li>
<li>Mouse click on format/tags/author is enabled for group filtering</li>
<li>Improve the following functions:
<ul class="org-ul">
<li><code>calibredb-unmark-and-backward</code></li>
<li><code>calibredb-add</code></li>
<li><code>calibredb-remove</code></li>
<li><code>calibredb-open-with-default-tool</code></li>
</ul></li>
<li>Add <code>calibredb-format-character-icons</code></li>
</ul>
</div>
</div>

<div id="outline-container-org5bf4449" class="outline-3">
<h3 id="org5bf4449"><span class="section-number-3">7.3.</span> <code>2021-03-21</code></h3>
<div class="outline-text-3" id="text-7-3">
<p>
Version  <b>2.9.0:</b>
</p>
<ul class="org-ul">
<li>Now, it is able to set metadata asynchronously.</li>
<li>Add <code>calibredb-org-link-setup</code> to support org-link: <code>calibredb:</code>, copy the marked items as org link with <code>y y</code> or <code>y f</code>.</li>
<li>Improve exit functions on *~calibredb-search*~ and *~calibredb-entry*~ buffers.</li>
<li><p>
Add universal prefix support for <code>calibredb-open-file-with-default-tool</code>,
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  C-u M-x calibredb-open-file-with-default-tool
</pre>
</div>
<p>
will open the folder where the file located.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org07fd530" class="outline-3">
<h3 id="org07fd530"><span class="section-number-3">7.4.</span> <code>2020-12-25</code></h3>
<div class="outline-text-3" id="text-7-4">
<p>
Merry Christmas! I am happy to release <b>2.8.0</b>
</p>
<ul class="org-ul">
<li>Add <code>calibredb-add-duplicate</code>, if you want to add the duplicated files, set it to <code>non-Nil</code>.</li>
<li>Add <code>calibredb-quick-look</code>, in macOS, press <code>,</code> to Quick look the item.</li>
<li>Add <code>calibredb-yank-dispatch</code>, you can copy the marked items with pressing <code>y y</code> as org links now.</li>
<li>Add &ldquo;Fetch and set metadata by identifier&rdquo;, with keys <code>s d</code>: <code>calibredb-fetch-and-set-metadata-by-id</code>. Thanks <a href="https://github.com/tpeacock19">tpeacock19</a>!</li>
<li>Minor improvement on ISBN auto detection. Thanks <a href="https://github.com/dalanicolai">dalanicolai</a> tremendous help on auto fetching metadata feature!</li>
<li>Fix #23: Choosing the location where the bib file will be stored</li>
</ul>
</div>
</div>


<div id="outline-container-orgc33ca81" class="outline-3">
<h3 id="orgc33ca81"><span class="section-number-3">7.5.</span> <code>2020-10-12</code></h3>
<div class="outline-text-3" id="text-7-5">
<p>
Version  <b>2.7.0:</b>
</p>
<ul class="org-ul">
<li>Add feature: Virtual Library</li>
<li>Add configuration: <code>calibredb-virtual-library-alist</code></li>
<li><p>
Adjust keybindings:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">    <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"l"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-virtual-library-list</span><span style="color: #3B6EA8;">)</span>
    <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"L"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-library-list</span><span style="color: #3B6EA8;">)</span> <span style="color: #8b94a5;">; </span><span style="color: #8b94a5;">previous l</span>
    <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"n"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-virtual-library-next</span><span style="color: #3B6EA8;">)</span>
    <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"N"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-library-next</span><span style="color: #3B6EA8;">)</span> <span style="color: #8b94a5;">; </span><span style="color: #8b94a5;">previous n</span>
    <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"p"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-virtual-library-previous</span><span style="color: #3B6EA8;">)</span>
    <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"P"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-library-previous</span><span style="color: #3B6EA8;">)</span> <span style="color: #8b94a5;">; </span><span style="color: #8b94a5;">previous p</span>
    <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">define-key</span> map <span style="color: #4F894C;">"R"</span> <span style="color: #3B6EA8;">#'</span><span style="color: #9A7500;">calibredb-search-clear-filter</span><span style="color: #3B6EA8;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org028613a" class="outline-3">
<h3 id="org028613a"><span class="section-number-3">7.6.</span> <code>2020-08-29</code></h3>
<div class="outline-text-3" id="text-7-6">
<p>
Version <b>2.6.0</b>:
</p>
<ul class="org-ul">
<li>Add fields: ids, publisher, series and lang<sub>code</sub>.</li>
<li>Add: <code>calibredb-rga</code>.</li>
<li>Add: <code>calibredb-remove-marked-items</code>.</li>
<li>Improve live filter: support space-separated multiple keywords.</li>
<li>Add configuration: <code>calibredb-show-results</code></li>
<li>Add configuration: <code>calibredb-entry-render-comments</code></li>
</ul>
</div>
</div>

<div id="outline-container-orge99cce4" class="outline-3">
<h3 id="orge99cce4"><span class="section-number-3">7.7.</span> <code>2020-08-09</code></h3>
<div class="outline-text-3" id="text-7-7">
<p>
Version <b>2.5.0</b>:
</p>
<ul class="org-ul">
<li>Add: <code>calibredb-fetch-and-set-metadata-by-author-and-title</code> and <code>calibredb-fetch-and-set-metadata-by-isbn</code> (thanks to Daniel Nicolai)</li>
</ul>
</div>
</div>

<div id="outline-container-org3e2283f" class="outline-3">
<h3 id="org3e2283f"><span class="section-number-3">7.8.</span> <code>2020-07-16</code></h3>
<div class="outline-text-3" id="text-7-8">
<p>
Version <b>2.4.1</b>:
</p>
<ul class="org-ul">
<li>Add: <code>calibredb-add-format</code> and <code>cliabredb-remove-format</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgb1c1510" class="outline-3">
<h3 id="orgb1c1510"><span class="section-number-3">7.9.</span> <code>2020-07-01</code></h3>
<div class="outline-text-3" id="text-7-9">
<p>
Version <b>2.4.0</b>:
</p>
<ul class="org-ul">
<li>Add: <code>calibredb-toggle-view</code></li>
<li>Split to multiple source files</li>
</ul>
</div>
</div>

<div id="outline-container-orgbdc7fa4" class="outline-3">
<h3 id="orgbdc7fa4"><span class="section-number-3">7.10.</span> <code>2020-06-22</code></h3>
<div class="outline-text-3" id="text-7-10">
<p>
Version <b>2.3.2</b>:
</p>
<ul class="org-ul">
<li>Add: <code>icons-in-terminal</code> support</li>
<li>Rename <code>calibredb-format-icons</code> to <code>calibredb-format-all-the-icons</code></li>
<li>Add <code>calibredb-format-icons-in-terminal</code></li>
</ul>
</div>
</div>

<div id="outline-container-org2edac45" class="outline-3">
<h3 id="org2edac45"><span class="section-number-3">7.11.</span> <code>2020-06-21</code></h3>
<div class="outline-text-3" id="text-7-11">
<p>
Version <b>2.3.1</b>:
</p>
<ul class="org-ul">
<li>Sort favorite, highlight, and archive items: favorite -&gt; highlight -&gt; rest -&gt; archive</li>
<li>Add: <code>calibredb-condense-comments</code></li>
</ul>
</div>
</div>

<div id="outline-container-org9cb4772" class="outline-3">
<h3 id="org9cb4772"><span class="section-number-3">7.12.</span> <code>2020-06-11</code></h3>
<div class="outline-text-3" id="text-7-12">
<p>
Version <b>2.3.0</b>:
</p>
<ul class="org-ul">
<li>New features: <code>calibredb-edit-annotation</code></li>
</ul>
</div>
</div>

<div id="outline-container-org5bf9548" class="outline-3">
<h3 id="org5bf9548"><span class="section-number-3">7.13.</span> <code>2020-06-07</code></h3>
<div class="outline-text-3" id="text-7-13">
<p>
Version <b>2.2.0</b>:
</p>
<ul class="org-ul">
<li>New features: favorite, highlight, and archive the items.</li>
<li>Clickable items: tags, authors, and format.</li>
</ul>
</div>
</div>

<div id="outline-container-org5b4c07d" class="outline-3">
<h3 id="org5b4c07d"><span class="section-number-3">7.14.</span> <code>2020-06-06</code></h3>
<div class="outline-text-3" id="text-7-14">
<p>
Version 2.1.0:
</p>
<ul class="org-ul">
<li>Improve the performance of live filter when dealing with big libraries.</li>
</ul>
</div>
</div>

<div id="outline-container-orge7b3348" class="outline-3">
<h3 id="orge7b3348"><span class="section-number-3">7.15.</span> <code>2020-06-05</code></h3>
<div class="outline-text-3" id="text-7-15">
<p>
Version <b>2.0.0</b>:
</p>
<ul class="org-ul">
<li>Adjust or add keybindings: <code>RET</code> <code>v</code> <code>V</code> <code>.</code> <code>M-n</code> <code>M-p</code> to provide better user experience.</li>
<li>Add <code>calibredb-open-dired</code></li>
<li>Upgrade <code>calibredb-add</code> to support add marked items in ivy.</li>
<li>Improve user experience</li>
</ul>
</div>
</div>

<div id="outline-container-orga10a342" class="outline-3">
<h3 id="orga10a342"><span class="section-number-3">7.16.</span> <code>2020-06-05</code></h3>
<div class="outline-text-3" id="text-7-16">
<p>
Version <b>1.9.0</b>:
</p>
<ul class="org-ul">
<li>Add BibTex support: <code>calibredb-catalog-bib-dispatch</code></li>
</ul>
</div>
</div>

<div id="outline-container-org02daacd" class="outline-3">
<h3 id="org02daacd"><span class="section-number-3">7.17.</span> <code>2020-06-04</code></h3>
<div class="outline-text-3" id="text-7-17">
<p>
Version <b>1.8.0</b>:
</p>
<ul class="org-ul">
<li>Add <code>calibredb-show-next-entry</code> and <code>calibredb-show-previous-entry</code>.</li>
<li>Add <b>Total</b>, <b>Filter keyword</b>, <b>Marked</b> in <code>*calibredb-search*</code> header.</li>
<li>Improve the <code>*calibredb-show*</code> performance.</li>
</ul>
</div>
</div>

<div id="outline-container-orgab6665a" class="outline-3">
<h3 id="orgab6665a"><span class="section-number-3">7.18.</span> <code>2020-05-31</code></h3>
<div class="outline-text-3" id="text-7-18">
<p>
Version <b>1.7.0</b>:
</p>
<ul class="org-ul">
<li>Add <code>calibredb-search-live-filter</code> to support live filtering.</li>
</ul>
</div>
</div>

<div id="outline-container-org038d39a" class="outline-3">
<h3 id="org038d39a"><span class="section-number-3">7.19.</span> <code>2020-05-30</code></h3>
<div class="outline-text-3" id="text-7-19">
<p>
Version <b>1.6.0</b>:
</p>
<ul class="org-ul">
<li>Add mark/unmark features in <code>*calibredb-search*</code></li>
<li>Upgrade <code>calibredb-set-metadata-dispatch</code> and <code>calibredb-export-dispatch.</code></li>
<li>Add <code>calibredb-library-next</code> and <code>calibredb-library-previous</code></li>
<li>Improve the library management experience.</li>
</ul>
</div>
</div>

<div id="outline-container-orgfb10b3c" class="outline-3">
<h3 id="orgfb10b3c"><span class="section-number-3">7.20.</span> <code>2020-05-16</code></h3>
<div class="outline-text-3" id="text-7-20">
<p>
Version <b>1.5.0</b>:
</p>
<ul class="org-ul">
<li>Add keybindings.</li>
</ul>
</div>
</div>

<div id="outline-container-orgbaf938a" class="outline-3">
<h3 id="orgbaf938a"><span class="section-number-3">7.21.</span> <code>2020-05-15</code></h3>
<div class="outline-text-3" id="text-7-21">
<p>
Version <b>1.4.0</b>:
</p>
<ul class="org-ul">
<li>Add customization items, faces and formats for <code>*calibredb-search*</code> and completing list.</li>
</ul>
</div>
</div>

<div id="outline-container-org57c58b9" class="outline-3">
<h3 id="org57c58b9"><span class="section-number-3">7.22.</span> <code>2020-05-14</code></h3>
<div class="outline-text-3" id="text-7-22">
<p>
Version <b>1.3.0</b>:
</p>
<ul class="org-ul">
<li><code>calibredb-clone</code></li>
<li><code>calibrede-switch-library</code></li>
<li><code>calibrede-library-list</code></li>
</ul>
</div>
</div>

<div id="outline-container-org0d9e64c" class="outline-3">
<h3 id="org0d9e64c"><span class="section-number-3">7.23.</span> <code>2020-05-13</code></h3>
<div class="outline-text-3" id="text-7-23">
<p>
Version <b>1.2.0</b>:
</p>
<ul class="org-ul">
<li><code>calibredb-export</code></li>
<li><code>calibredb</code></li>
</ul>
</div>
</div>

<div id="outline-container-org6ea53b8" class="outline-3">
<h3 id="org6ea53b8"><span class="section-number-3">7.24.</span> <code>2020-05-10</code></h3>
<div class="outline-text-3" id="text-7-24">
<p>
Version <b>1.1.0</b>:
</p>
<ul class="org-ul">
<li><code>calibredb-dispatch</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgf4ce6ef" class="outline-3">
<h3 id="orgf4ce6ef"><span class="section-number-3">7.25.</span> <code>2020-05-09</code></h3>
<div class="outline-text-3" id="text-7-25">
<p>
Version <b>1.0.0</b>:
</p>
<ul class="org-ul">
<li><code>calibredb-find-helm</code></li>
<li><code>calibredb-find-counsel</code></li>
<li><code>calibredb-list</code></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: Aug 9, 2020</p>
<p class="author">Author: Damon Chen</p>
<p class="date">Created: 2022-02-28 Mon 14:14</p>
</div>
</body>
</html>
